# web2py-restful-openapi-crossplatform-app

This repo contains a proof of concept typescript react ionic cross platform app that uses an openapi/swagger client which is autogenerated from pydal and served via web2py.  It uses elasticsearch for indexing and faceted search.  Forms are generated from jsonschema7 via react-json-schema-form.

HIGHLIGHTS:

- [pyDAL Database Abstraction Layer](https://github.com/web2py/pydal)
- [web2py Autogenerated RESTful API](http://web2py.com/books/default/chapter/29/10/services#parse_as_rest-experimental-)
- [Database Autogenerated Swagger Documentation](https://github.com/myiremark/web2py-restful-openapi-crossplatform-app/blob/master/server/web2py/applications/api/controllers/autogenerated.py)
- [Typescript Swagger Generated axios API Client](https://openapi-generator.tech/docs/installation/)
- JWT token based auth
- [JSONSchema Forms](https://react-jsonschema-form.readthedocs.io/en/latest/)
- [Elasticsearch powered indexing](https://elastic.co/)
- [SearchKit faceted search](https://github.com/searchkit/)
- Progressive Web, Android, iOS Apps</IonLabel>
- Electron Desktop App

## Installation

### client

```
git clone https://github.com/myiremark/web2py-restful-openapi-crossplatform-app/;
cd web2py-restful-openapi-crossplatform-app/client/ionic;
npm install;
```

### server
```
git clone https://github.com/myiremark/web2py-restful-openapi-crossplatform-app/;
mkvirtualenv crossplatform
cd web2py-restful-openapi-crossplatform-app/server/web2py;
pip install -r requirements.txt
```

### elasticsearch

```
docker run -p 127.0.0.1:9200:9200 -p 127.0.0.1:9300:9300 -e "discovery.type=single-node" -e "http.cors.enabled=true" -e 'http.cors.allow-origin="*"' -e "http.cors.allow-methods=OPTIONS,HEAD,GET,POST,PUT,DELETE" -e "http.cors.allow-headers=X-Requested-With,X-Auth-Token,Content-Type,Content-Length" docker.elastic.co/elasticsearch/elasticsearch:7.6.2
```

or use included docker compose / dockerfile

#### generate typescript client from server

```
cd web2py-restful-openapi-crossplatform-app/client/ionic;

# generate most recent swagger

curl -O http://127.0.0.1:9999/api/autogenerated/swagger.json

npx @openapitools/openapi-generator-cli generate -i swagger.json -g typescript-axios -o src/services/web2pyrestful
```

### License

This repo contains code licensed under more than one license.

web2py has its own license (LGPL) at:

server/web2py/LICENSE.

api application located at:

server/web2py/applications/api/*

has is licensed according to this repo

TODO: build process and remove web2py from repo for clarity
